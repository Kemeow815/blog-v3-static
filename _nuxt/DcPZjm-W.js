import{d as $,u as S,f as N,a6 as K,V as U,g as l,h as r,Z as C,l as w,j as f,i as d,B as W,k as n,p as Y,n as t,q as P,H as g,W as F,D as R,t as u,Y as G,_ as I,r as j,o as J,a7 as Q,F as B,m as X,e as O,L as Z,a8 as ee,A as te,a as oe,b as se,M as q,N as H,a9 as ae}from"#entry";import{a as V,c as A,g as L,b as ne}from"./DR1pY-pW.js";import{c as re,d as E}from"./Bl5h2vge.js";import{_ as ie}from"./--TrgIYp.js";import ce from"./djnt9Hs8.js";import{u as x}from"./DAscxr5S.js";import{a as le,q as pe}from"./DGZKq3_H.js";import{_ as de}from"./ChyN7w0T.js";import"./1VVZC74o.js";import"./rJCbAzvX.js";const me={class:"post-nav"},ue={class:"operations"},_e={key:0,class:"post-info"},ge=["datetime"],fe=["datetime"],he={key:2},ve=$({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(y){const o=y,i=S(),s=N(()=>o.categories?.[0]),c=N(()=>re(s.value)),a=`【${i.title}】${o.title}

${o.description?`${o.description}

`:""}${new URL(o.path,i.url).href}`,{copy:_,copied:h}=K(a);return(e,p)=>{const k=W,b=Y,v=R,m=U("tip");return r(),l("div",{class:C(["post-header",{"has-cover":e.image,"text-revert":e.meta?.coverRevert}])},[e.image?(r(),w(k,{key:0,class:"post-cover",src:e.image,alt:e.title},null,8,["src","alt"])):f("",!0),d("div",me,[d("div",ue,[n(b,{icon:t(h)?"ph:check-bold":"ph:share-bold",onClick:p[0]||(p[0]=D=>t(_)())},{default:P(()=>[...p[1]||(p[1]=[g(" 文字分享 ",-1)])]),_:1},8,["icon"])]),e.meta?.hideInfo?f("",!0):(r(),l("div",_e,[e.date?F((r(),l("time",{key:0,datetime:("getIsoDatetime"in e?e.getIsoDatetime:t(A))(e.date)},[n(v,{name:"ph:calendar-dots-bold"}),g(" "+u(("getPostDate"in e?e.getPostDate:t(L))(o.date)),1)],8,ge)),[[m,`创建于 ${("getLocaleDatetime"in e?e.getLocaleDatetime:t(V))(o.date)}`]]):f("",!0),("isTimeDiffSignificant"in e?e.isTimeDiffSignificant:t(ne))(e.date,e.updated,.999)?F((r(),l("time",{key:1,datetime:("getIsoDatetime"in e?e.getIsoDatetime:t(A))(e.updated)},[n(v,{name:"ph:calendar-plus-bold"}),g(" "+u(("getPostDate"in e?e.getPostDate:t(L))(o.updated)),1)],8,fe)),[[m,`修改于 ${("getLocaleDatetime"in e?e.getLocaleDatetime:t(V))(o.updated)}`]]):f("",!0),t(s)?(r(),l("span",he,[n(v,{name:t(c)},null,8,["name"]),g(" "+u(t(s)),1)])):f("",!0),d("span",null,[n(v,{name:"ph:paragraph-bold"}),g(" "+u(("formatNumber"in e?e.formatNumber:t(G))(e.readingTime?.words))+" 字 ",1)])]))]),d("h1",{class:C(["post-title",("getPostTypeClassName"in e?e.getPostTypeClassName:t(E))(e.type)])},u(e.title),3)],2)}}}),ye=Object.assign(I(ve,[["__scopeId","data-v-c4aef9ce"]]),{__name:"PostHeader"}),be={class:"md-excerpt gradient-card"},Pe=$({__name:"Excerpt",props:{excerpt:{}},setup(y){const o=y,i=S(),s=j(o.excerpt),c=j("");return i.component.excerpt?.animation!==!1&&(s.value="",J(async()=>{c.value=i.component.excerpt?.caret??"_";for(const a of o.excerpt)s.value+=a,await Q(50);c.value=""})),(a,_)=>{const h=R;return r(),l("div",be,[n(h,{name:"ph:highlighter-bold"}),g(u(t(s))+u(t(c)),1)])}}}),$e=Object.assign(I(Pe,[["__scopeId","data-v-42706883"]]),{__name:"PostExcerpt"}),ke={class:"post-footer"},De={key:0,class:"reference"},Ce={class:"content"},Ie={class:"license"},Te={class:"content"},Ne=$({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(y){const o=S();return(i,s)=>{const c=ce;return r(),l("div",ke,[i.references?(r(),l("section",De,[s[0]||(s[0]=d("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),d("div",Ce,[d("ul",null,[(r(!0),l(B,null,X(i.references,(a,_)=>(r(),l("li",{key:_},[n(c,{href:a.link||""},{default:P(()=>[g(u(a.title??a.link),1)]),_:2},1032,["href"])]))),128))])])])):f("",!0),d("section",Ie,[s[3]||(s[3]=d("div",{class:"title text-creative"}," 许可协议 ",-1)),d("div",Te,[d("p",null,[s[1]||(s[1]=g(" 本文采用 ",-1)),n(c,{href:t(o).copyright.url},{default:P(()=>[g(u(t(o).copyright.name),1)]),_:1},8,["href"]),s[2]||(s[2]=g(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),we=Object.assign(I(Ne,[["__scopeId","data-v-8990bdfb"]]),{__name:"PostFooter"}),Ae={class:"surround-text"},Le=["datetime"],Se={key:0,class:"surround-post"},Re=$({__name:"PostSurround",async setup(y){let o,i;const s=O(),{data:c}=([o,i]=Z(()=>x(`surround-${s.path}`,()=>le("content",s.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),o=await o,i(),o),[a=null,_=null]=c.value??[],[h,e]=ee({inheritAttrs:!1});return(p,k)=>{const b=R,v=te;return r(),l(B,null,[n(t(h),null,{default:P(({post:m,icon:D,fallbackIcon:T,fallbackText:z,alignRight:M})=>[n(v,{to:m?.path,class:"surround-link","align-right":M},{default:P(()=>[n(b,{name:m?D:T},null,8,["name"]),d("div",Ae,[d("strong",{class:C(["title",("getPostTypeClassName"in p?p.getPostTypeClassName:t(E))(m?.type)])},u(m?.title||z),3),m?(r(),l("time",{key:0,datetime:("getIsoDatetime"in p?p.getIsoDatetime:t(A))(m.date)},u(("getPostDate"in p?p.getPostDate:t(L))(m.date)),9,Le)):f("",!0)])]),_:2},1032,["to","align-right"])]),_:1}),t(a)||t(_)?(r(),l("div",Se,[n(t(e),{post:t(_),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),n(t(e),{post:t(a),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-right":""},null,8,["post"])])):f("",!0)],64)}}}),Be=Object.assign(I(Re,[["__scopeId","data-v-f181f773"]]),{__name:"PostSurround"}),Me=$({__name:"[...slug]",async setup(y){let o,i;const s=O(),c=oe();c.setAside(["toc"]);const{data:a}=([o,i]=Z(()=>x(()=>s.path,()=>pe("content").path(s.path).first(),"$BPopkF1nvN")),o=await o,i(),o),_=N(()=>a.value?.description||"");return a.value?(se({title:a.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:a.value.image},{name:"description",content:a.value.description}]}),c.setAside(a.value.meta?.aside)):(s.meta.title="404",c.setAside(["blog-log"])),(h,e)=>{const p=ye,k=$e,b=ie,v=we,m=Be,D=de,T=ae;return t(a)?(r(),l(B,{key:0},[n(p,q(H(t(a))),null,16),t(_)?(r(),w(k,{key:0,excerpt:t(_)},null,8,["excerpt"])):f("",!0),n(b,{class:C(["article",("getPostTypeClassName"in h?h.getPostTypeClassName:t(E))(t(a)?.type,{prefix:"md"})]),value:t(a),tag:"article"},null,8,["class","value"]),n(v,q(H(t(a))),null,16),n(m),n(D)],64)):(r(),w(T,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}});export{Me as default};
