import{d as D,M as F,f as H,r as m,o as B,as as E,aA as M,l as N,h as p,q as f,i as s,k as g,I as q,E as L,D as V,n as x,g as y,F as $,m as z,b3 as O,t as k,B as S,_ as j}from"#entry";import{u as G}from"./D4YNi6QA.js";import{q as K}from"./DClaPEl0.js";function R(d=5,a=1){return G(`featured-articles-${d}-${a}`,()=>K("content").where("stem","LIKE","posts/%").where("recommend",">=",a).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all().then(l=>l.sort((e,o)=>{const n=(o.recommend||0)-(e.recommend||0);return n!==0?n:new Date(o.date||0).getTime()-new Date(e.date||0).getTime()}).slice(0,d)),{default:()=>[]})}const U=globalThis.setInterval,W={class:"z-slide-header"},Y={class:"at-slide-hover"},J={class:"tit"},P=["title"],w=100,Q=D({__name:"FeaturedArticlesCarousel",async setup(d){let a,l;const{data:c}=([a,l]=F(()=>R(5,1)),a=await a,l(),a),e=H(()=>(Array.isArray(c)?c:c.value)||[]),o=m([]),n=m(0),i=m(null);let u=null;function A(){if(n.value+=1,i.value){const h=i.value.scrollHeight,t=i.value.clientHeight;n.value>=h-t-w&&o.value.push(...e.value)}}function v(){_(),u=U(A,40)}function _(){u&&(clearInterval(u),u=null)}return B(()=>{E(()=>{o.value=[...e.value,...e.value,...e.value],n.value=e.value.length*w,v()})}),M(_),(h,t)=>{const I=L,C=O,T=S;return p(),N(T,null,{fallback:f(()=>[...t[2]||(t[2]=[s("section",{class:"wrap"},null,-1)])]),default:f(()=>[s("div",W,[t[1]||(t[1]=s("span",{class:"title text-creative"},"精选文章",-1)),s("div",Y,[g(I,{name:"ph:mouse-simple-bold"}),t[0]||(t[0]=q(" 瀑布流滚动展示 ",-1))])]),s("section",{ref_key:"containerRef",ref:i,class:"wrap",onMouseenter:_,onMouseleave:v},[s("div",{class:"track",style:V({transform:`translateY(-${x(n)}px)`,transition:"transform 40ms linear"})},[(p(!0),y($,null,z(x(o),(r,b)=>(p(),y("article",{key:r.id??b,class:"card"},[g(C,{to:r.path,class:"link"},{default:f(()=>[s("h3",J,k(r.title),1),s("p",{class:"desc",title:r.description},k(r.description),9,P)]),_:2},1032,["to"])]))),128))],4)],544)]),_:1})}}}),te=Object.assign(j(Q,[["__scopeId","data-v-7eb8e4c0"]]),{__name:"WidgetFeaturedArticlesCarousel"});export{te as default};
