import{d as N,u as U,a as V,b as H,o as M,V as O,f as m,z as $,W as q,g as i,h as r,k as u,i as o,q as B,I as p,E as G,n as k,F as y,m as C,D as _,t as c,j as v,l as J,X as S,Y as W,_ as Y}from"#entry";import Z from"./BNC0CyEO.js";import{_ as R}from"./ChyN7w0T.js";import"./a7QGUShO.js";import"./BDOwDAak.js";const X={class:"essay-stats"},K={class:"essay-more",href:"https://moment.051531.xyz",target:"_blank",rel:"noopener noreferrer"},Q={class:"page-essay"},tt={class:"talk-container"},ot={key:0,class:"loading-container"},et={key:1,class:"error-container"},nt={key:2,class:"talks-list"},st={class:"talk-meta"},at=["src","alt"],lt={class:"info"},rt={class:"talk-nick"},it={class:"talk-date"},ct={class:"talk-content"},dt=["innerHTML"],ut={key:0},pt={key:1,class:"zone_imgbox"},vt={key:2,class:"video-container"},_t=["src"],gt=["src"],bt=["src"],mt=["href"],kt={class:"douban-card-left"},yt={class:"douban-card-right"},ht={class:"douban-card-item"},ft={class:"douban-card-item"},xt={class:"douban-card-item"},wt={class:"douban-card-item"},Mt=["href"],$t={class:"douban-card-left"},Bt={class:"douban-card-right"},Ct={class:"douban-card-item"},St={class:"douban-card-item"},Tt={class:"douban-card-item"},Pt={class:"douban-card-item"},It={key:5,class:"external-link gradient-card"},At=["href"],jt={class:"link-left"},zt=["src","alt"],Et={class:"link-right"},Lt={class:"link-title"},Dt={class:"talk-bottom"},Ft={class:"talk-tags"},Nt={class:"tag"},Ut=["onClick"],Vt=["onClick"],Ht=N({__name:"essays",setup(Ot){const T=U();V().setAside(["blog-stats","blog-tech","blog-log"]),H({title:"Áû¨Èó¥",meta:[{property:"og:type",content:"profile"},{name:"description",content:`${T.title}ÁöÑÁ¢éÁ¢éÂøµÈ°µÈù¢ÔºåËÆ∞ÂΩïÁîüÊ¥ªÁÇπÊª¥Ôºå‰∏Ä‰∫õÊÉ≥Ê≥ïÂíåÁîüÊ¥ª„ÄÇ`}]});const h={MEMO_API:"https://moment.051531.xyz/api/memo/list",PAGE_SIZE:30};M(()=>{const a=t=>new Promise((l,n)=>{if(document.querySelector(`script[src="${t}"]`))return l(null);const s=document.createElement("script");s.src=t,s.async=!0,s.onload=l,s.onerror=n,document.head.appendChild(s)});a("https://jsd.myxz.top/npm/aplayer/dist/APlayer.min.js").catch(t=>console.error("ËÑöÊú¨Âä†ËΩΩÂ§±Ë¥•:",t)),a("https://jsd.myxz.top/npm/meting@2/dist/Meting.min.js").catch(t=>console.error("ËÑöÊú¨Âä†ËΩΩÂ§±Ë¥•:",t))});const d=O("essayTalks",()=>({talks:[],loading:!0,error:!1,lastFetchTime:0})),P=m(()=>d.value.talks),I=m(()=>d.value.loading),A=m(()=>d.value.error);function j(a){const t=new Date(a),n=[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes()].map(s=>s.toString().length===1?`0${s}`:s);return`${n[0]}-${n[1]}-${n[2]} ${n[3]}:${n[4]}`}function z(a){let t=a.content;const l=a.imgs?a.imgs.split(","):[],n=JSON.parse(a.ext||"{}");return t=t.replace(/\[(.*?)\]\((.*?)\)/g,'<a class="talk_content_link" target="_blank" rel="nofollow" href="$2">@$1</a>').replace(/- \[ \]/g,"‚ö™").replace(/- \[x\]/g,"‚ö´").replace(/\n/g,"<br>"),t=`<div class="talk_content_text">${t}</div>`,{text:t,images:l.map(s=>s.startsWith("http")?s:`https:${s}`),music:n.music?.type==="tencent"?{type:n.music.type,server:n.music.server,id:n.music.id,api:n.music.api}:null,video:n.video?.type==="bilibili"?{type:"bilibili",url:n.video.value,id:n.video.value.match(/BV\w+/)?.[0]}:n.video?.type==="youtube"?{type:"youtube",url:n.video.value,id:n.video.value.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w-]{11})/)?.[1]}:n.video?.type==="online"?{type:"online",url:n.video.value}:null,doubanMovie:n.doubanMovie?.id?{url:n.doubanMovie.url,title:n.doubanMovie.title,image:n.doubanMovie.image,director:n.doubanMovie.director,rating:n.doubanMovie.rating,runtime:n.doubanMovie.runtime}:null,doubanBook:n.doubanBook?.id?{url:n.doubanBook.url,title:n.doubanBook.title,image:n.doubanBook.image,author:n.doubanBook.author,pubDate:n.doubanBook.pubDate,rating:n.doubanBook.rating}:null,externalLink:a.externalUrl?{url:a.externalUrl,title:a.externalTitle,favicon:a.externalFavicon}:null}}async function E(){const a=Date.now();if(!(a-d.value.lastFetchTime<1800*1e3))try{d.value.loading=!0,d.value.error=!1;const t=await fetch(h.MEMO_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({size:h.PAGE_SIZE})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const l=await t.json();if(l.code===0&&l.data?.list){const n=l.data.list.map(s=>({content:z(s),user:{username:s.user.username,nickname:s.user.nickname,avatarUrl:s.user.avatarUrl},date:j(s.createdAt),location:s.location||"",tags:s.tags?typeof s.tags=="string"?s.tags.split(",").filter(g=>g.trim()):s.tags:["Êó†Ê†áÁ≠æ"]}));d.value.talks=n,d.value.lastFetchTime=a}}catch(t){console.error("Error fetching talks:",t),d.value.error=!0}finally{d.value.loading=!1}}M(E);function L(a){const t=a.replace(/<[^>]+>/g,""),l=document.querySelector(".atk-textarea-wrap .atk-textarea");l&&(l.value=`> ${t}

`,l.focus(),l.scrollIntoView({behavior:"smooth",block:"center"}))}function D(a){if(!a)return;const t=`https://www.google.com/maps/search/${encodeURIComponent(a)}`;window.open(t,"_blank")}return(a,t)=>{const l=G,n=$("PageBanner"),s=$("meting-js"),g=Z,F=R,f=q("tip");return r(),i(y,null,[u(n,{title:"Áû¨Èó¥",subtitle:"ËÆ∞ÂΩïÁîüÊ¥ªÁÇπÊª¥Ôºå‰∏Ä‰∫õÊÉ≥Ê≥ï",image:"https://lib.bsgun.cn/Hexo-static/img/essay-bg.avif"},{extra:B(()=>[o("div",X,[t[1]||(t[1]=o("div",{class:"powered-by"}," Powered by moments ",-1)),o("a",K,[u(l,{name:"icon-park-twotone:more-app",class:"icon"}),t[0]||(t[0]=p(" Êü•ÁúãÊõ¥Â§ö ",-1))])])]),_:1}),o("div",Q,[o("div",tt,[u(W,{name:"fade",mode:"out-in"},{default:B(()=>[k(I)?(r(),i("div",ot,[...t[2]||(t[2]=[o("div",{class:"loading-spinner"},null,-1),o("p",null,"Âä†ËΩΩ‰∏≠...",-1)])])):k(A)?(r(),i("div",et,[u(l,{name:"line-md:alert",class:"error-icon"}),t[3]||(t[3]=o("p",null,"Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï",-1))])):(r(),i("div",nt,[(r(!0),i(y,null,C(k(P),(e,x)=>(r(),i("div",{key:x,class:"talk-item",style:_({"--delay":`${x*.1}s`})},[o("div",st,[o("img",{class:"avatar",src:e.user.avatarUrl,alt:e.user.nickname},null,8,at),o("div",lt,[o("div",rt,[p(c(e.user.nickname)+" ",1),u(l,{name:"material-symbols:verified",class:"verified"})]),o("div",it,c(e.date),1)])]),o("div",ct,[o("div",{class:"talk_content_text",innerHTML:e.content.text},null,8,dt),e.content.music?(r(),i("div",ut,[t[4]||(t[4]=o("link",{src:"https://jsd.myxz.top/npm/aplayer/dist/APlayer.min.css",rel:"stylesheet"},null,-1)),e.music.type==="tencent"?(r(),J(s,{key:0,id:e.content.music.id,server:e.content.music.server,api:e.content.music.api},null,8,["id","server","api"])):v("",!0)])):v("",!0),e.content.images.length?(r(),i("div",pt,[(r(!0),i(y,null,C(e.content.images,(b,w)=>(r(),i("figure",{key:w,class:"img-item"},[u(g,{src:b,zoom:"",class:"talk-img",loading:"lazy",fetchpriority:w===0?"high":"low"},null,8,["src","fetchpriority"])]))),128))])):v("",!0),e.content.video?(r(),i("div",vt,[e.content.video.type==="bilibili"?(r(),i("iframe",{key:0,src:`//player.bilibili.com/player.html?bvid=${e.content.video.id}&autoplay=0`,scrolling:"no",frameborder:"no",allowfullscreen:"true"},null,8,_t)):e.content.video.type==="youtube"?(r(),i("iframe",{key:1,src:`https://www.youtube.com/embed/${e.content.video.id}`,frameborder:"0",allowfullscreen:""},null,8,gt)):e.content.video.type==="online"?(r(),i("video",{key:2,src:e.content.video.url,controls:"",class:"online-video"},null,8,bt)):v("",!0)])):v("",!0),e.content.doubanMovie?(r(),i("a",{key:3,class:"douban-card gradient-card",href:e.content.doubanMovie.url,target:"_blank"},[o("div",{class:"douban-card-bgimg",style:_({backgroundImage:`url('${e.content.doubanMovie.image}')`})},null,4),o("div",kt,[o("div",{class:"douban-card-img",style:_({backgroundImage:`url('${e.content.doubanMovie.image}')`})},null,4)]),o("div",yt,[o("div",ht,[t[5]||(t[5]=o("span",null,"ÁîµÂΩ±Âêç: ",-1)),o("strong",null,c(e.content.doubanMovie.title),1)]),o("div",ft,[t[6]||(t[6]=o("span",null,"ÂØºÊºî: ",-1)),p(" "+c(e.content.doubanMovie.director),1)]),o("div",xt,[t[7]||(t[7]=o("span",null,"ËØÑÂàÜ: ",-1)),p(" "+c(e.content.doubanMovie.rating),1)]),o("div",wt,[t[8]||(t[8]=o("span",null,"Êó∂Èïø: ",-1)),p(" "+c(e.content.doubanMovie.runtime),1)])])],8,mt)):v("",!0),e.content.doubanBook?(r(),i("a",{key:4,class:"douban-card gradient-card",href:e.content.doubanBook.url,target:"_blank"},[o("div",{class:"douban-card-bgimg",style:_({backgroundImage:`url('${e.content.doubanBook.image}')`})},null,4),o("div",$t,[o("div",{class:"douban-card-img",style:_({backgroundImage:`url('${e.content.doubanBook.image}')`})},null,4)]),o("div",Bt,[o("div",Ct,[t[9]||(t[9]=o("span",null,"‰π¶Âêç: ",-1)),o("strong",null,c(e.content.doubanBook.title),1)]),o("div",St,[t[10]||(t[10]=o("span",null,"‰ΩúËÄÖ: ",-1)),p(" "+c(e.content.doubanBook.author),1)]),o("div",Tt,[t[11]||(t[11]=o("span",null,"Âá∫ÁâàÂπ¥‰ªΩ: ",-1)),p(" "+c(e.content.doubanBook.pubDate),1)]),o("div",Pt,[t[12]||(t[12]=o("span",null,"ËØÑÂàÜ: ",-1)),p(" "+c(e.content.doubanBook.rating),1)])])],8,Mt)):v("",!0),e.content.externalLink?(r(),i("div",It,[o("a",{href:e.content.externalLink.url,target:"_blank",rel:"nofollow"},[o("div",jt,[o("img",{src:e.content.externalLink.favicon,alt:e.content.externalLink.title},null,8,zt)]),o("div",Et,[o("div",Lt,c(e.content.externalLink.title),1),u(l,{name:"material-symbols:chevron-right",class:"icon"})])],8,At)])):v("",!0)]),o("div",Dt,[o("div",Ft,[o("span",Nt," üè∑Ô∏è"+c(Array.isArray(e.tags)?e.tags.join(", "):e.tags),1),e.location?S((r(),i("span",{key:0,class:"location",onClick:b=>D(e.location)},[u(l,{name:"ph:map-pin-bold",class:"location-icon"}),p(" "+c(e.location),1)],8,Ut)),[[f,`ÊêúÁ¥¢: ${e.location}`]]):v("",!0)]),S((r(),i("button",{class:"comment-btn",onClick:b=>L(e.content.text)},[u(l,{name:"ph:chats-bold",class:"icon"})],8,Vt)),[[f,"ËØÑËÆ∫"]])])],4))),128)),t[13]||(t[13]=o("div",{class:"talks-footer"},[o("p",null,"‰ªÖÊòæÁ§∫ÊúÄËøë 30 Êù°ËÆ∞ÂΩï")],-1))]))]),_:1})])]),u(F,{key:"/essay"})],64)}}}),Rt=Y(Ht,[["__scopeId","data-v-fff293cf"]]);export{Rt as default};
